(()=>{"use strict";var e,t={87:()=>{const e=window.wp.blocks,t=window.wp.element,r=window.wp.blockEditor,a=window.wp.components,l=window.wp.i18n,n=window.ReactJSXRuntime;(0,e.registerBlockType)("gan/newsletter-form",{title:(0,l.__)("Newsletter Form","getanewsletter"),icon:"email",category:"widgets",attributes:{formId:{type:"string",default:""},isTitleEnabled:{type:"boolean",default:!1},formTitle:{type:"string",default:"Join our newsletter"},isDescriptionEnabled:{type:"boolean",default:!1},formDescription:{type:"string",default:"Get weekly access to our deals, tricks and tips"},appearance:{type:"string",default:"square"},fieldBackground:{type:"string",default:"#ffffff"},fieldBorder:{type:"string",default:"#000000"},labelColor:{type:"string",default:"#000000"},buttonBackground:{type:"string",default:"#0280FF"},buttonTextColor:{type:"string",default:"#000000"},errorMessage:{type:"string",default:""}},edit:({attributes:e,setAttributes:s})=>{const[o,i]=(0,t.useState)([]),[d,c]=(0,t.useState)(null),[u,g]=(0,t.useState)(!0),[m,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{g(!0),fetch(`${ganAjax.ajaxurl}?action=gan_get_subscription_forms_list`).then((e=>e.json())).then((e=>{e.success?i(e.data):s({errorMessage:e.data}),g(!1)}))}),[]),(0,t.useEffect)((()=>{e.formId&&(f(!0),fetch(`${ganAjax.ajaxurl}?action=gan_get_subscription_form`,{method:"POST",body:new URLSearchParams({form_id:e.formId})}).then((e=>e.json())).then((e=>{e.success?c(e.data):s({errorMessage:e.data}),f(!1)})))}),[e.formId]),(0,t.useEffect)((()=>{const t=document.querySelector(".gan-newsletter-form");t&&(t.style.setProperty("--gan-border-radius","rounded"===e.appearance?"8px":"0"),t.style.setProperty("--gan-field-background",e.fieldBackground),t.style.setProperty("--gan-field-border",e.fieldBorder),t.style.setProperty("--gan-label-color",e.labelColor),t.style.setProperty("--gan-button-background",e.buttonBackground),t.style.setProperty("--gan-button-text-color",e.buttonTextColor))}),[e.appearance,e.fieldBackground,e.fieldBorder,e.labelColor,e.buttonBackground,e.buttonTextColor]);const p=e=>{s({formId:e})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.InspectorControls,{children:[(0,n.jsxs)(a.PanelBody,{title:(0,l.__)("Form Settings","getanewsletter"),children:[u?(0,n.jsx)(a.Spinner,{}):(0,n.jsx)(a.SelectControl,{label:(0,l.__)("Select Form","getanewsletter"),value:e.formId,options:[{label:(0,l.__)("Choose a form","getanewsletter"),value:"",disabled:!0},...o.map((e=>({label:e.name,value:e.key})))],onChange:p}),(0,n.jsx)(a.CheckboxControl,{label:(0,l.__)("Title","getanewsletter"),checked:e.isTitleEnabled,onChange:e=>s({isTitleEnabled:e})}),e.isTitleEnabled&&(0,n.jsx)(a.TextControl,{label:(0,l.__)("Title","getanewsletter"),value:e.formTitle,onChange:e=>s({formTitle:e}),placeholder:"Join our newsletter"}),(0,n.jsx)(a.CheckboxControl,{label:(0,l.__)("Description","getanewsletter"),checked:e.isDescriptionEnabled,onChange:e=>s({isDescriptionEnabled:e})}),e.isDescriptionEnabled&&(0,n.jsx)(a.TextControl,{label:(0,l.__)("Description","getanewsletter"),value:e.formDescription,onChange:e=>s({formDescription:e}),placeholder:"Get weekly access to our deals, tricks and tips"}),(0,n.jsx)(a.RadioControl,{label:(0,l.__)("Appearance","getanewsletter"),selected:e.appearance,options:[{label:(0,l.__)("Square","getanewsletter"),value:"square"},{label:(0,l.__)("Rounded","getanewsletter"),value:"rounded"}],onChange:e=>s({appearance:e})})]}),(0,n.jsx)(r.PanelColorSettings,{title:(0,l.__)("Color Settings","getanewsletter"),colorSettings:[{value:e.fieldBackground,onChange:e=>s({fieldBackground:e}),label:(0,l.__)("Field Background","getanewsletter")},{value:e.fieldBorder,onChange:e=>s({fieldBorder:e}),label:(0,l.__)("Field Border","getanewsletter")},{value:e.labelColor,onChange:e=>s({labelColor:e}),label:(0,l.__)("Label Color","getanewsletter")},{value:e.buttonBackground,onChange:e=>s({buttonBackground:e}),label:(0,l.__)("Button Background","getanewsletter")},{value:e.buttonTextColor,onChange:e=>s({buttonTextColor:e}),label:(0,l.__)("Button Text Color","getanewsletter")}]})]}),(0,n.jsxs)("div",{className:"gan-newsletter-form",children:[e.errorMessage&&(0,n.jsx)("div",{className:"error-message",children:e.errorMessage}),!e.formId&&(0,n.jsx)(n.Fragment,{children:u?(0,n.jsx)(a.Spinner,{}):(0,n.jsx)(a.SelectControl,{label:(0,l.__)("Select Form","getanewsletter"),value:e.formId,options:[{label:(0,l.__)("Choose a form","getanewsletter"),value:"",disabled:!0},...o.map((e=>({label:e.name,value:e.key})))],onChange:p})}),e.isTitleEnabled&&(0,n.jsx)("h2",{class:"gan-newsletter-form--title",children:e.formTitle}),e.isDescriptionEnabled&&(0,n.jsx)("p",{class:"gan-newsletter-form--description",children:e.formDescription}),m?(0,n.jsx)(a.Spinner,{}):d&&(0,n.jsxs)("form",{method:"post",className:"newsletter-signup",action:"javascript:alert('success!');",children:[d.form.first_name&&(0,n.jsxs)("div",{className:"gan-newsletter-form--input-field",children:[(0,n.jsx)("label",{htmlFor:"id_first_name",children:d.form.first_name_label||(0,l.__)("First name","getanewsletter")}),(0,n.jsx)("input",{id:"id_first_name",type:"text",className:"text",name:"id_first_name"})]}),d.form.last_name&&(0,n.jsxs)("div",{className:"gan-newsletter-form--input-field",children:[(0,n.jsx)("label",{htmlFor:"id_last_name",children:d.form.last_name_label||(0,l.__)("Last name","getanewsletter")}),(0,n.jsx)("input",{id:"id_last_name",type:"text",className:"text",name:"id_last_name"})]}),(0,n.jsxs)("div",{className:"gan-newsletter-form--input-field",children:[(0,n.jsx)("label",{htmlFor:"id_email",children:(0,l.__)("Email address","getanewsletter")}),(0,n.jsx)("input",{id:"id_email",type:"text",className:"email",name:"id_email"})]}),d.customAttributes.map((e=>d.form.attributes.includes(e.code)&&(0,n.jsxs)("div",{className:"gan-newsletter-form--input-field",children:[(0,n.jsx)("label",{htmlFor:`attr_${e.code}`,children:e.name}),(0,n.jsx)("input",{id:`attr_${e.code}`,type:"text",className:"text",name:`attributes[${e.code}]`})]},e.code))),(0,n.jsx)("div",{class:"gan-newsletter-form--button-container",children:(0,n.jsx)("button",{type:"submit",children:d.form.button_text||(0,l.__)("Subscribe","getanewsletter")})})]}),(0,n.jsx)("div",{className:"news-note"})]})]})},save:()=>null})}},r={};function a(e){var l=r[e];if(void 0!==l)return l.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,r,l,n)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,l,n]=e[c],o=!0,i=0;i<r.length;i++)(!1&n||s>=n)&&Object.keys(a.O).every((e=>a.O[e](r[i])))?r.splice(i--,1):(o=!1,n<s&&(s=n));if(o){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,l,n]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var l,n,[s,o,i]=r,d=0;if(s.some((t=>0!==e[t]))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(i)var c=i(a)}for(t&&t(r);d<s.length;d++)n=s[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},r=globalThis.webpackChunkgetanewsletter_blocks=globalThis.webpackChunkgetanewsletter_blocks||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=a.O(void 0,[350],(()=>a(87)));l=a.O(l)})();