(()=>{"use strict";var e,t={87:()=>{const e=window.wp.blocks,t=window.wp.element,a=window.wp.blockEditor,r=window.wp.components,l=window.wp.i18n,n=window.ReactJSXRuntime;(0,e.registerBlockType)("gan/newsletter-form",{title:(0,l.__)("Get a Newsletter","getanewsletter"),icon:"email",category:"widgets",attributes:{formId:{type:"string",default:""},isTitleEnabled:{type:"boolean",default:!1},formTitle:{type:"string",default:(0,l.__)("Join our newsletter","getanewsletter")},isDescriptionEnabled:{type:"boolean",default:!1},formDescription:{type:"string",default:(0,l.__)("Enter your details below to sign up for our newsletter","getanewsletter")},appearance:{type:"string",default:"square"},fieldBackground:{type:"string",default:"#ffffff"},fieldBorder:{type:"string",default:"#000000"},labelColor:{type:"string",default:"#000000"},buttonBackground:{type:"string",default:"#0280FF"},buttonTextColor:{type:"string",default:"#ffffff"},errorMessage:{type:"string",default:""},uniqueId:{type:"string",default:""}},edit:({attributes:e,setAttributes:o,clientId:s})=>{const[i,d]=(0,t.useState)([]),[c,u]=(0,t.useState)(null),[f,g]=(0,t.useState)(!0),[b,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{g(!0),fetch(`${ganAjax.ajaxurl}?action=gan_get_subscription_forms_list`).then((e=>e.json())).then((e=>{e.success?d(e.data):o({errorMessage:e.data}),g(!1)}))}),[]),(0,t.useEffect)((()=>{e.formId&&(m(!0),fetch(`${ganAjax.ajaxurl}?action=gan_get_subscription_form`,{method:"POST",body:new URLSearchParams({form_id:e.formId})}).then((e=>e.json())).then((e=>{e.success?u(e.data):o({errorMessage:e.data}),m(!1)})))}),[e.formId]),(0,t.useEffect)((()=>{const t=document.querySelector(`.gan-block-form-${e.uniqueId}`);t&&(t.style.setProperty("--gan-border-radius","rounded"===e.appearance?"8px":"0"),t.style.setProperty("--gan-field-background",e.fieldBackground),t.style.setProperty("--gan-field-border",e.fieldBorder),t.style.setProperty("--gan-label-color",e.labelColor),t.style.setProperty("--gan-button-background",e.buttonBackground),t.style.setProperty("--gan-button-text-color",e.buttonTextColor))}),[e.appearance,e.fieldBackground,e.fieldBorder,e.labelColor,e.buttonBackground,e.buttonTextColor,e.uniqueId]),(0,t.useEffect)((()=>{o({uniqueId:s})}),[s]);const p=e=>{o({formId:e})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.InspectorControls,{children:[(0,n.jsxs)(r.PanelBody,{title:(0,l.__)("Form Settings","getanewsletter"),children:[f?(0,n.jsx)(r.Spinner,{}):(0,n.jsx)(r.SelectControl,{label:(0,l.__)("Select form","getanewsletter"),value:e.formId,options:[{label:(0,l.__)("Choose a form","getanewsletter"),value:"",disabled:!0},...i.map((e=>({label:e.name,value:e.key})))],onChange:p}),(0,n.jsx)(r.CheckboxControl,{label:(0,l.__)("Title","getanewsletter"),checked:e.isTitleEnabled,onChange:e=>o({isTitleEnabled:e})}),e.isTitleEnabled&&(0,n.jsx)(r.TextControl,{label:(0,l.__)("Title","getanewsletter"),value:e.formTitle,onChange:e=>o({formTitle:e}),placeholder:"Join our newsletter"}),(0,n.jsx)(r.CheckboxControl,{label:(0,l.__)("Description","getanewsletter"),checked:e.isDescriptionEnabled,onChange:e=>o({isDescriptionEnabled:e})}),e.isDescriptionEnabled&&(0,n.jsx)(r.TextControl,{label:(0,l.__)("Description","getanewsletter"),value:e.formDescription,onChange:e=>o({formDescription:e}),placeholder:"Enter your details below to sign up for our newsletter"}),(0,n.jsx)(r.RadioControl,{label:(0,l.__)("Appearance","getanewsletter"),selected:e.appearance,options:[{label:(0,l.__)("Square corners","getanewsletter"),value:"square"},{label:(0,l.__)("Rounded corners","getanewsletter"),value:"rounded"}],onChange:e=>o({appearance:e})})]}),(0,n.jsx)(a.PanelColorSettings,{title:(0,l.__)("Color settings","getanewsletter"),colorSettings:[{value:e.fieldBackground,onChange:e=>o({fieldBackground:e}),label:(0,l.__)("Input field – Background","getanewsletter")},{value:e.fieldBorder,onChange:e=>o({fieldBorder:e}),label:(0,l.__)("Input field – Border","getanewsletter")},{value:e.labelColor,onChange:e=>o({labelColor:e}),label:(0,l.__)("Label","getanewsletter")},{value:e.buttonBackground,onChange:e=>o({buttonBackground:e}),label:(0,l.__)("Button – Background","getanewsletter")},{value:e.buttonTextColor,onChange:e=>o({buttonTextColor:e}),label:(0,l.__)("Button – Text","getanewsletter")}]})]}),(0,n.jsxs)("div",{className:`gan-block-form gan-block-form-${e.uniqueId}`,children:[e.errorMessage&&(0,n.jsx)("div",{className:"error-message",children:e.errorMessage}),!e.formId&&(0,n.jsx)(n.Fragment,{children:f?(0,n.jsx)(r.Spinner,{}):(0,n.jsx)(r.SelectControl,{label:(0,l.__)("Select form","getanewsletter"),value:e.formId,options:[{label:(0,l.__)("Choose a form","getanewsletter"),value:"",disabled:!0},...i.map((e=>({label:e.name,value:e.key})))],onChange:p})}),e.isTitleEnabled&&(0,n.jsx)("h2",{class:"gan-block-form--title",children:e.formTitle}),e.isDescriptionEnabled&&(0,n.jsx)("p",{class:"gan-block-form--description",children:e.formDescription}),b?(0,n.jsx)(r.Spinner,{}):c&&(0,n.jsxs)("form",{method:"post",className:"newsletter-signup",action:"javascript:alert('success!');",children:[c.form.first_name&&(0,n.jsxs)("div",{className:"gan-block-form--input-field",children:[(0,n.jsx)("label",{htmlFor:`id_first_name_${s}`,children:c.form.first_name_label||(0,l.__)("First name","getanewsletter")}),(0,n.jsx)("input",{id:`id_first_name_${s}`,type:"text",className:"text",name:"id_first_name"})]}),c.form.last_name&&(0,n.jsxs)("div",{className:"gan-block-form--input-field",children:[(0,n.jsx)("label",{htmlFor:`id_last_name_${s}`,children:c.form.last_name_label||(0,l.__)("Last name","getanewsletter")}),(0,n.jsx)("input",{id:`id_last_name_${s}`,type:"text",className:"text",name:"id_last_name"})]}),(0,n.jsxs)("div",{className:"gan-block-form--input-field",children:[(0,n.jsx)("label",{htmlFor:`id_email_${s}`,children:(0,l.__)("Email address","getanewsletter")}),(0,n.jsx)("input",{id:`id_email_${s}`,type:"text",className:"email",name:"id_email"})]}),c.customAttributes.map((e=>c.form.attributes.includes(e.code)&&(0,n.jsxs)("div",{className:"gan-block-form--input-field",children:[(0,n.jsx)("label",{htmlFor:`attr_${e.code}_${s}`,children:e.name}),(0,n.jsx)("input",{id:`attr_${e.code}_${s}`,type:"text",className:"text",name:`attributes[${e.code}]`})]},e.code))),(0,n.jsx)("div",{className:"gan-button-container",children:(0,n.jsx)("button",{className:"gan-button-container--button",type:"submit",children:c.form.button_text||(0,l.__)("Subscribe","getanewsletter")})})]}),(0,n.jsx)("div",{className:"news-note"})]})]})},save:()=>null})}},a={};function r(e){var l=a[e];if(void 0!==l)return l.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,a,l,n)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,l,n]=e[c],s=!0,i=0;i<a.length;i++)(!1&n||o>=n)&&Object.keys(r.O).every((e=>r.O[e](a[i])))?a.splice(i--,1):(s=!1,n<o&&(o=n));if(s){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,l,n]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var l,n,[o,s,i]=a,d=0;if(o.some((t=>0!==e[t]))){for(l in s)r.o(s,l)&&(r.m[l]=s[l]);if(i)var c=i(r)}for(t&&t(a);d<o.length;d++)n=o[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},a=globalThis.webpackChunkgetanewsletter_blocks=globalThis.webpackChunkgetanewsletter_blocks||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=r.O(void 0,[350],(()=>r(87)));l=r.O(l)})();