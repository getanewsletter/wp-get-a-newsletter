(()=>{"use strict";var e,t={74:()=>{const e=window.React,t=window.wp.blocks,a=window.wp.element,l=window.wp.blockEditor,r=window.wp.components,n=window.wp.i18n;(0,t.registerBlockType)("gan/newsletter-form",{title:(0,n.__)("Newsletter Form","getanewsletter"),icon:"email",category:"widgets",attributes:{formId:{type:"string",default:""},isTitleEnabled:{type:"boolean",default:!1},formTitle:{type:"string",default:"Join our newsletter"},isDescriptionEnabled:{type:"boolean",default:!1},formDescription:{type:"string",default:"Get weekly access to our deals, tricks and tips"},appearance:{type:"string",default:"square"},fieldBackground:{type:"string",default:"#ffffff"},fieldBorder:{type:"string",default:"#000000"},labelColor:{type:"string",default:"#000000"},buttonBackground:{type:"string",default:"#0280FF"},buttonTextColor:{type:"string",default:"#000000"},errorMessage:{type:"string",default:""}},edit:({attributes:t,setAttributes:o})=>{const[s,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),[g,f]=(0,a.useState)(!1);(0,a.useEffect)((()=>{u(!0),fetch(`${ganAjax.ajaxurl}?action=gan_get_subscription_forms_list`).then((e=>e.json())).then((e=>{e.success?i(e.data):o({errorMessage:e.data}),u(!1)}))}),[]),(0,a.useEffect)((()=>{t.formId&&(f(!0),fetch(`${ganAjax.ajaxurl}?action=gan_get_subscription_form`,{method:"POST",body:new URLSearchParams({form_id:t.formId})}).then((e=>e.json())).then((e=>{e.success?d(e.data):o({errorMessage:e.data}),f(!1)})))}),[t.formId]),(0,a.useEffect)((()=>{const e=document.querySelector(".gan-newsletter-form");e&&(e.style.setProperty("--gan-border-radius","rounded"===t.appearance?"8px":"0"),e.style.setProperty("--gan-field-background",t.fieldBackground),e.style.setProperty("--gan-field-border",t.fieldBorder),e.style.setProperty("--gan-label-color",t.labelColor),e.style.setProperty("--gan-button-background",t.buttonBackground),e.style.setProperty("--gan-button-text-color",t.buttonTextColor))}),[t.appearance,t.fieldBackground,t.fieldBorder,t.labelColor,t.buttonBackground,t.buttonTextColor]);const p=e=>{o({formId:e})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:(0,n.__)("Form Settings","getanewsletter")},m?(0,e.createElement)(r.Spinner,null):(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Select Form","getanewsletter"),value:t.formId,options:[{label:(0,n.__)("Choose a form","getanewsletter"),value:"",disabled:!0},...s.map((e=>({label:e.name,value:e.key})))],onChange:p}),(0,e.createElement)(r.CheckboxControl,{label:(0,n.__)("Title","getanewsletter"),checked:t.isTitleEnabled,onChange:e=>o({isTitleEnabled:e})}),t.isTitleEnabled&&(0,e.createElement)(r.TextControl,{label:(0,n.__)("Title","getanewsletter"),value:t.formTitle,onChange:e=>o({formTitle:e}),placeholder:"Join our newsletter"}),(0,e.createElement)(r.CheckboxControl,{label:(0,n.__)("Description","getanewsletter"),checked:t.isDescriptionEnabled,onChange:e=>o({isDescriptionEnabled:e})}),t.isDescriptionEnabled&&(0,e.createElement)(r.TextControl,{label:(0,n.__)("Description","getanewsletter"),value:t.formDescription,onChange:e=>o({formDescription:e}),placeholder:"Get weekly access to our deals, tricks and tips"}),(0,e.createElement)(r.RadioControl,{label:(0,n.__)("Appearance","getanewsletter"),selected:t.appearance,options:[{label:(0,n.__)("Square","getanewsletter"),value:"square"},{label:(0,n.__)("Rounded","getanewsletter"),value:"rounded"}],onChange:e=>o({appearance:e})})),(0,e.createElement)(l.PanelColorSettings,{title:(0,n.__)("Color Settings","getanewsletter"),colorSettings:[{value:t.fieldBackground,onChange:e=>o({fieldBackground:e}),label:(0,n.__)("Field Background","getanewsletter")},{value:t.fieldBorder,onChange:e=>o({fieldBorder:e}),label:(0,n.__)("Field Border","getanewsletter")},{value:t.labelColor,onChange:e=>o({labelColor:e}),label:(0,n.__)("Label Color","getanewsletter")},{value:t.buttonBackground,onChange:e=>o({buttonBackground:e}),label:(0,n.__)("Button Background","getanewsletter")},{value:t.buttonTextColor,onChange:e=>o({buttonTextColor:e}),label:(0,n.__)("Button Text Color","getanewsletter")}]})),(0,e.createElement)("div",{className:"gan-newsletter-form"},t.errorMessage&&(0,e.createElement)("div",{className:"error-message"},t.errorMessage),!t.formId&&(0,e.createElement)(e.Fragment,null,m?(0,e.createElement)(r.Spinner,null):(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Select Form","getanewsletter"),value:t.formId,options:[{label:(0,n.__)("Choose a form","getanewsletter"),value:"",disabled:!0},...s.map((e=>({label:e.name,value:e.key})))],onChange:p})),t.isTitleEnabled&&(0,e.createElement)("h2",{class:"gan-newsletter-form--title"},t.formTitle),t.isDescriptionEnabled&&(0,e.createElement)("p",{class:"gan-newsletter-form--description"},t.formDescription),g?(0,e.createElement)(r.Spinner,null):c&&(0,e.createElement)("form",{method:"post",className:"newsletter-signup",action:"javascript:alert('success!');"},c.form.first_name&&(0,e.createElement)("div",{className:"gan-newsletter-form--input-field"},(0,e.createElement)("label",{htmlFor:"id_first_name"},c.form.first_name_label||(0,n.__)("First name","getanewsletter")),(0,e.createElement)("input",{id:"id_first_name",type:"text",className:"text",name:"id_first_name"})),c.form.last_name&&(0,e.createElement)("div",{className:"gan-newsletter-form--input-field"},(0,e.createElement)("label",{htmlFor:"id_last_name"},c.form.last_name_label||(0,n.__)("Last name","getanewsletter")),(0,e.createElement)("input",{id:"id_last_name",type:"text",className:"text",name:"id_last_name"})),(0,e.createElement)("div",{className:"gan-newsletter-form--input-field"},(0,e.createElement)("label",{htmlFor:"id_email"},(0,n.__)("Email address","getanewsletter")),(0,e.createElement)("input",{id:"id_email",type:"text",className:"email",name:"id_email"})),c.customAttributes.map((t=>c.form.attributes.includes(t.code)&&(0,e.createElement)("div",{className:"gan-newsletter-form--input-field",key:t.code},(0,e.createElement)("label",{htmlFor:`attr_${t.code}`},t.name),(0,e.createElement)("input",{id:`attr_${t.code}`,type:"text",className:"text",name:`attributes[${t.code}]`})))),(0,e.createElement)("div",{class:"gan-newsletter-form--button-container"},(0,e.createElement)("button",{type:"submit"},c.form.button_text||(0,n.__)("Subscribe","getanewsletter")))),(0,e.createElement)("div",{className:"news-note"})))},save:()=>null})}},a={};function l(e){var r=a[e];if(void 0!==r)return r.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,l),n.exports}l.m=t,e=[],l.O=(t,a,r,n)=>{if(!a){var o=1/0;for(d=0;d<e.length;d++){for(var[a,r,n]=e[d],s=!0,i=0;i<a.length;i++)(!1&n||o>=n)&&Object.keys(l.O).every((e=>l.O[e](a[i])))?a.splice(i--,1):(s=!1,n<o&&(o=n));if(s){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,r,n]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[o,s,i]=a,c=0;if(o.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(i)var d=i(l)}for(t&&t(a);c<o.length;c++)n=o[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(d)},a=globalThis.webpackChunkgetanewsletter_blocks=globalThis.webpackChunkgetanewsletter_blocks||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=l.O(void 0,[350],(()=>l(74)));r=l.O(r)})();